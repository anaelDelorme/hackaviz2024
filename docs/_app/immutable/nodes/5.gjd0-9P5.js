import{s as Yt,e as Bt,a as Vt,Z as Wt,c as Jt,a2 as Kt,g as Qt,a0 as Ut,b as xt,f as _n,l as Cn,i as Dn,n as Fn,p as jt}from"../chunks/scheduler.9nvv5FP_.js";import{S as kt,i as bt}from"../chunks/index.D0mZ5FHt.js";import{s as rt}from"../chunks/transform.CzLan8xH.js";class b{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const e=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const l=e[r],a=t+l,f=Math.abs(t)<Math.abs(l)?t-(a-l):l-(a-t);f&&(e[i++]=f),t=a}return e[i]=t,this._n=i+1,this}valueOf(){const t=this._partials;let e=this._n,i,r,l,a=0;if(e>0){for(a=t[--e];e>0&&(i=a,r=t[--e],a=i+r,l=r-(a-i),!l););e>0&&(l<0&&t[e-1]<0||l>0&&t[e-1]>0)&&(r=l*2,i=a+r,r==i-a&&(a=i))}return a}}function*ni(n){for(const t of n)yield*t}function Pt(n){return Array.from(ni(n))}function ti(n){if(!n.ok)throw new Error(n.status+" "+n.statusText);if(!(n.status===204||n.status===205))return n.json()}function ii(n,t){return fetch(n,t).then(ti)}var T=1e-6,ei=1e-12,$=Math.PI,X=$/2,ot=$/4,B=$*2,Y=180/$,G=$/180,C=Math.abs,mt=Math.atan,gn=Math.atan2,F=Math.cos,ri=Math.exp,oi=Math.log,q=Math.sin,ui=Math.sign||function(n){return n>0?1:n<0?-1:0},tn=Math.sqrt,li=Math.tan;function fi(n){return n>1?0:n<-1?$:Math.acos(n)}function vn(n){return n>1?X:n<-1?-X:Math.asin(n)}function J(){}function mn(n,t){n&&lt.hasOwnProperty(n.type)&&lt[n.type](n,t)}var ut={Feature:function(n,t){mn(n.geometry,t)},FeatureCollection:function(n,t){for(var e=n.features,i=-1,r=e.length;++i<r;)mn(e[i].geometry,t)}},lt={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)n=e[i],t.point(n[0],n[1],n[2])},LineString:function(n,t){Hn(n.coordinates,t,0)},MultiLineString:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)Hn(e[i],t,0)},Polygon:function(n,t){ft(n.coordinates,t)},MultiPolygon:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)ft(e[i],t)},GeometryCollection:function(n,t){for(var e=n.geometries,i=-1,r=e.length;++i<r;)mn(e[i],t)}};function Hn(n,t,e){var i=-1,r=n.length-e,l;for(t.lineStart();++i<r;)l=n[i],t.point(l[0],l[1],l[2]);t.lineEnd()}function ft(n,t){var e=-1,i=n.length;for(t.polygonStart();++e<i;)Hn(n[e],t,1);t.polygonEnd()}function rn(n,t){n&&ut.hasOwnProperty(n.type)?ut[n.type](n,t):mn(n,t)}function Xn(n){return[gn(n[1],n[0]),vn(n[2])]}function un(n){var t=n[0],e=n[1],i=F(e);return[i*F(t),i*q(t),q(e)]}function wn(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function $n(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function qn(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function yn(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function Yn(n){var t=tn(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function Bn(n,t){function e(i,r){return i=n(i,r),t(i[0],i[1])}return n.invert&&t.invert&&(e.invert=function(i,r){return i=t.invert(i,r),i&&n.invert(i[0],i[1])}),e}function Vn(n,t){return C(n)>$&&(n-=Math.round(n/B)*B),[n,t]}Vn.invert=Vn;function $t(n,t,e){return(n%=B)?t||e?Bn(ct(n),st(t,e)):ct(n):t||e?st(t,e):Vn}function at(n){return function(t,e){return t+=n,C(t)>$&&(t-=Math.round(t/B)*B),[t,e]}}function ct(n){var t=at(n);return t.invert=at(-n),t}function st(n,t){var e=F(n),i=q(n),r=F(t),l=q(t);function a(f,v){var g=F(v),o=F(f)*g,u=q(f)*g,c=q(v),p=c*e+o*i;return[gn(u*r-p*l,o*e-c*i),vn(p*r+u*l)]}return a.invert=function(f,v){var g=F(v),o=F(f)*g,u=q(f)*g,c=q(v),p=c*r-u*l;return[gn(u*r+c*l,o*e+p*i),vn(p*e-o*i)]},a}function ai(n){n=$t(n[0]*G,n[1]*G,n.length>2?n[2]*G:0);function t(e){return e=n(e[0]*G,e[1]*G),e[0]*=Y,e[1]*=Y,e}return t.invert=function(e){return e=n.invert(e[0]*G,e[1]*G),e[0]*=Y,e[1]*=Y,e},t}function ci(n,t,e,i,r,l){if(e){var a=F(t),f=q(t),v=i*e;r==null?(r=t+i*B,l=t-v/2):(r=pt(a,r),l=pt(a,l),(i>0?r<l:r>l)&&(r+=i*B));for(var g,o=r;i>0?o>l:o<l;o-=v)g=Xn([a,-f*F(o),-f*q(o)]),n.point(g[0],g[1])}}function pt(n,t){t=un(t),t[0]-=n,Yn(t);var e=fi(-t[1]);return((-t[2]<0?-e:e)+B-T)%B}function Nt(){var n=[],t;return{point:function(e,i,r){t.push([e,i,r])},lineStart:function(){n.push(t=[])},lineEnd:J,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var e=n;return n=[],t=null,e}}}function Pn(n,t){return C(n[0]-t[0])<T&&C(n[1]-t[1])<T}function Mn(n,t,e,i){this.x=n,this.z=t,this.o=e,this.e=i,this.v=!1,this.n=this.p=null}function Lt(n,t,e,i,r){var l=[],a=[],f,v;if(n.forEach(function(h){if(!((w=h.length-1)<=0)){var w,d=h[0],P=h[w],E;if(Pn(d,P)){if(!d[2]&&!P[2]){for(r.lineStart(),f=0;f<w;++f)r.point((d=h[f])[0],d[1]);r.lineEnd();return}P[0]+=2*T}l.push(E=new Mn(d,h,null,!0)),a.push(E.o=new Mn(d,null,E,!1)),l.push(E=new Mn(P,h,null,!1)),a.push(E.o=new Mn(P,null,E,!0))}}),!!l.length){for(a.sort(t),ht(l),ht(a),f=0,v=a.length;f<v;++f)a[f].e=e=!e;for(var g=l[0],o,u;;){for(var c=g,p=!0;c.v;)if((c=c.n)===g)return;o=c.z,r.lineStart();do{if(c.v=c.o.v=!0,c.e){if(p)for(f=0,v=o.length;f<v;++f)r.point((u=o[f])[0],u[1]);else i(c.x,c.n.x,1,r);c=c.n}else{if(p)for(o=c.p.z,f=o.length-1;f>=0;--f)r.point((u=o[f])[0],u[1]);else i(c.x,c.p.x,-1,r);c=c.p}c=c.o,o=c.z,p=!p}while(!c.v);r.lineEnd()}}}function ht(n){if(t=n.length){for(var t,e=0,i=n[0],r;++e<t;)i.n=r=n[e],r.p=i,i=r;i.n=r=n[0],r.p=i}}function Gn(n){return C(n[0])<=$?n[0]:ui(n[0])*((C(n[0])+$)%B-$)}function si(n,t){var e=Gn(t),i=t[1],r=q(i),l=[q(e),-F(e),0],a=0,f=0,v=new b;r===1?i=X+T:r===-1&&(i=-X-T);for(var g=0,o=n.length;g<o;++g)if(c=(u=n[g]).length)for(var u,c,p=u[c-1],h=Gn(p),w=p[1]/2+ot,d=q(w),P=F(w),E=0;E<c;++E,h=S,d=R,P=I,p=y){var y=u[E],S=Gn(y),M=y[1]/2+ot,R=q(M),I=F(M),N=S-h,L=N>=0?1:-1,z=L*N,_=z>$,Z=d*R;if(v.add(gn(Z*L*q(z),P*I+Z*F(z))),a+=_?N+L*B:N,_^h>=e^S>=e){var D=$n(un(p),un(y));Yn(D);var A=$n(l,D);Yn(A);var s=(_^N>=0?-1:1)*vn(A[2]);(i>s||i===s&&(D[0]||D[1]))&&(f+=_^N>=0?1:-1)}}return(a<-T||a<T&&v<-ei)^f&1}function It(n,t,e,i){return function(r){var l=t(r),a=Nt(),f=t(a),v=!1,g,o,u,c={point:p,lineStart:w,lineEnd:d,polygonStart:function(){c.point=P,c.lineStart=E,c.lineEnd=y,o=[],g=[]},polygonEnd:function(){c.point=p,c.lineStart=w,c.lineEnd=d,o=Pt(o);var S=si(g,i);o.length?(v||(r.polygonStart(),v=!0),Lt(o,hi,S,e,r)):S&&(v||(r.polygonStart(),v=!0),r.lineStart(),e(null,null,1,r),r.lineEnd()),v&&(r.polygonEnd(),v=!1),o=g=null},sphere:function(){r.polygonStart(),r.lineStart(),e(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function p(S,M){n(S,M)&&r.point(S,M)}function h(S,M){l.point(S,M)}function w(){c.point=h,l.lineStart()}function d(){c.point=p,l.lineEnd()}function P(S,M){u.push([S,M]),f.point(S,M)}function E(){f.lineStart(),u=[]}function y(){P(u[0][0],u[0][1]),f.lineEnd();var S=f.clean(),M=a.result(),R,I=M.length,N,L,z;if(u.pop(),g.push(u),u=null,!!I){if(S&1){if(L=M[0],(N=L.length-1)>0){for(v||(r.polygonStart(),v=!0),r.lineStart(),R=0;R<N;++R)r.point((z=L[R])[0],z[1]);r.lineEnd()}return}I>1&&S&2&&M.push(M.pop().concat(M.shift())),o.push(M.filter(pi))}}return c}}function pi(n){return n.length>1}function hi(n,t){return((n=n.x)[0]<0?n[1]-X-T:X-n[1])-((t=t.x)[0]<0?t[1]-X-T:X-t[1])}const gt=It(function(){return!0},gi,di,[-$,-X]);function gi(n){var t=NaN,e=NaN,i=NaN,r;return{lineStart:function(){n.lineStart(),r=1},point:function(l,a){var f=l>0?$:-$,v=C(l-t);C(v-$)<T?(n.point(t,e=(e+a)/2>0?X:-X),n.point(i,e),n.lineEnd(),n.lineStart(),n.point(f,e),n.point(l,e),r=0):i!==f&&v>=$&&(C(t-i)<T&&(t-=i*T),C(l-f)<T&&(l-=f*T),e=vi(t,e,l,a),n.point(i,e),n.lineEnd(),n.lineStart(),n.point(f,e),r=0),n.point(t=l,e=a),i=f},lineEnd:function(){n.lineEnd(),t=e=NaN},clean:function(){return 2-r}}}function vi(n,t,e,i){var r,l,a=q(n-e);return C(a)>T?mt((q(t)*(l=F(i))*q(e)-q(i)*(r=F(t))*q(n))/(r*l*a)):(t+i)/2}function di(n,t,e,i){var r;if(n==null)r=e*X,i.point(-$,r),i.point(0,r),i.point($,r),i.point($,0),i.point($,-r),i.point(0,-r),i.point(-$,-r),i.point(-$,0),i.point(-$,r);else if(C(n[0]-t[0])>T){var l=n[0]<t[0]?$:-$;r=e*l/2,i.point(-l,r),i.point(0,r),i.point(l,r)}else i.point(t[0],t[1])}function Si(n){var t=F(n),e=2*G,i=t>0,r=C(t)>T;function l(o,u,c,p){ci(p,n,e,c,o,u)}function a(o,u){return F(o)*F(u)>t}function f(o){var u,c,p,h,w;return{lineStart:function(){h=p=!1,w=1},point:function(d,P){var E=[d,P],y,S=a(d,P),M=i?S?0:g(d,P):S?g(d+(d<0?$:-$),P):0;if(!u&&(h=p=S)&&o.lineStart(),S!==p&&(y=v(u,E),(!y||Pn(u,y)||Pn(E,y))&&(E[2]=1)),S!==p)w=0,S?(o.lineStart(),y=v(E,u),o.point(y[0],y[1])):(y=v(u,E),o.point(y[0],y[1],2),o.lineEnd()),u=y;else if(r&&u&&i^S){var R;!(M&c)&&(R=v(E,u,!0))&&(w=0,i?(o.lineStart(),o.point(R[0][0],R[0][1]),o.point(R[1][0],R[1][1]),o.lineEnd()):(o.point(R[1][0],R[1][1]),o.lineEnd(),o.lineStart(),o.point(R[0][0],R[0][1],3)))}S&&(!u||!Pn(u,E))&&o.point(E[0],E[1]),u=E,p=S,c=M},lineEnd:function(){p&&o.lineEnd(),u=null},clean:function(){return w|(h&&p)<<1}}}function v(o,u,c){var p=un(o),h=un(u),w=[1,0,0],d=$n(p,h),P=wn(d,d),E=d[0],y=P-E*E;if(!y)return!c&&o;var S=t*P/y,M=-t*E/y,R=$n(w,d),I=yn(w,S),N=yn(d,M);qn(I,N);var L=R,z=wn(I,L),_=wn(L,L),Z=z*z-_*(wn(I,I)-1);if(!(Z<0)){var D=tn(Z),A=yn(L,(-z-D)/_);if(qn(A,I),A=Xn(A),!c)return A;var s=o[0],m=u[0],O=o[1],H=u[1],V;m<s&&(V=s,s=m,m=V);var fn=m-s,U=C(fn-$)<T,k=U||fn<T;if(!U&&H<O&&(V=O,O=H,H=V),k?U?O+H>0^A[1]<(C(A[0]-s)<T?O:H):O<=A[1]&&A[1]<=H:fn>$^(s<=A[0]&&A[0]<=m)){var x=yn(L,(-z+D)/_);return qn(x,I),[A,Xn(x)]}}}function g(o,u){var c=i?n:$-n,p=0;return o<-c?p|=1:o>c&&(p|=2),u<-c?p|=4:u>c&&(p|=8),p}return It(a,f,l,i?[0,-n]:[-$,n-$])}function Ei(n,t,e,i,r,l){var a=n[0],f=n[1],v=t[0],g=t[1],o=0,u=1,c=v-a,p=g-f,h;if(h=e-a,!(!c&&h>0)){if(h/=c,c<0){if(h<o)return;h<u&&(u=h)}else if(c>0){if(h>u)return;h>o&&(o=h)}if(h=r-a,!(!c&&h<0)){if(h/=c,c<0){if(h>u)return;h>o&&(o=h)}else if(c>0){if(h<o)return;h<u&&(u=h)}if(h=i-f,!(!p&&h>0)){if(h/=p,p<0){if(h<o)return;h<u&&(u=h)}else if(p>0){if(h>u)return;h>o&&(o=h)}if(h=l-f,!(!p&&h<0)){if(h/=p,p<0){if(h>u)return;h>o&&(o=h)}else if(p>0){if(h<o)return;h<u&&(u=h)}return o>0&&(n[0]=a+o*c,n[1]=f+o*p),u<1&&(t[0]=a+u*c,t[1]=f+u*p),!0}}}}}var an=1e9,Rn=-an;function _i(n,t,e,i){function r(g,o){return n<=g&&g<=e&&t<=o&&o<=i}function l(g,o,u,c){var p=0,h=0;if(g==null||(p=a(g,u))!==(h=a(o,u))||v(g,o)<0^u>0)do c.point(p===0||p===3?n:e,p>1?i:t);while((p=(p+u+4)%4)!==h);else c.point(o[0],o[1])}function a(g,o){return C(g[0]-n)<T?o>0?0:3:C(g[0]-e)<T?o>0?2:1:C(g[1]-t)<T?o>0?1:0:o>0?3:2}function f(g,o){return v(g.x,o.x)}function v(g,o){var u=a(g,1),c=a(o,1);return u!==c?u-c:u===0?o[1]-g[1]:u===1?g[0]-o[0]:u===2?g[1]-o[1]:o[0]-g[0]}return function(g){var o=g,u=Nt(),c,p,h,w,d,P,E,y,S,M,R,I={point:N,lineStart:Z,lineEnd:D,polygonStart:z,polygonEnd:_};function N(s,m){r(s,m)&&o.point(s,m)}function L(){for(var s=0,m=0,O=p.length;m<O;++m)for(var H=p[m],V=1,fn=H.length,U=H[0],k,x,En=U[0],en=U[1];V<fn;++V)k=En,x=en,U=H[V],En=U[0],en=U[1],x<=i?en>i&&(En-k)*(i-x)>(en-x)*(n-k)&&++s:en<=i&&(En-k)*(i-x)<(en-x)*(n-k)&&--s;return s}function z(){o=u,c=[],p=[],R=!0}function _(){var s=L(),m=R&&s,O=(c=Pt(c)).length;(m||O)&&(g.polygonStart(),m&&(g.lineStart(),l(null,null,1,g),g.lineEnd()),O&&Lt(c,f,s,l,g),g.polygonEnd()),o=g,c=p=h=null}function Z(){I.point=A,p&&p.push(h=[]),M=!0,S=!1,E=y=NaN}function D(){c&&(A(w,d),P&&S&&u.rejoin(),c.push(u.result())),I.point=N,S&&o.lineEnd()}function A(s,m){var O=r(s,m);if(p&&h.push([s,m]),M)w=s,d=m,P=O,M=!1,O&&(o.lineStart(),o.point(s,m));else if(O&&S)o.point(s,m);else{var H=[E=Math.max(Rn,Math.min(an,E)),y=Math.max(Rn,Math.min(an,y))],V=[s=Math.max(Rn,Math.min(an,s)),m=Math.max(Rn,Math.min(an,m))];Ei(H,V,n,t,e,i)?(S||(o.lineStart(),o.point(H[0],H[1])),o.point(V[0],V[1]),O||o.lineEnd(),R=!1):O&&(o.lineStart(),o.point(s,m),R=!1)}E=s,y=m,S=O}return I}}const Wn=n=>n;var On=new b,Jn=new b,At,Tt,Kn,Qn,j={point:J,lineStart:J,lineEnd:J,polygonStart:function(){j.lineStart=wi,j.lineEnd=Mi},polygonEnd:function(){j.lineStart=j.lineEnd=j.point=J,On.add(C(Jn)),Jn=new b},result:function(){var n=On/2;return On=new b,n}};function wi(){j.point=yi}function yi(n,t){j.point=zt,At=Kn=n,Tt=Qn=t}function zt(n,t){Jn.add(Qn*n-Kn*t),Kn=n,Qn=t}function Mi(){zt(At,Tt)}var ln=1/0,Nn=ln,dn=-ln,Ln=dn,In={point:Ri,lineStart:J,lineEnd:J,polygonStart:J,polygonEnd:J,result:function(){var n=[[ln,Nn],[dn,Ln]];return dn=Ln=-(Nn=ln=1/0),n}};function Ri(n,t){n<ln&&(ln=n),n>dn&&(dn=n),t<Nn&&(Nn=t),t>Ln&&(Ln=t)}var Un=0,xn=0,cn=0,An=0,Tn=0,on=0,jn=0,kn=0,sn=0,Ct,Dt,K,Q,W={point:nn,lineStart:vt,lineEnd:dt,polygonStart:function(){W.lineStart=$i,W.lineEnd=Ni},polygonEnd:function(){W.point=nn,W.lineStart=vt,W.lineEnd=dt},result:function(){var n=sn?[jn/sn,kn/sn]:on?[An/on,Tn/on]:cn?[Un/cn,xn/cn]:[NaN,NaN];return Un=xn=cn=An=Tn=on=jn=kn=sn=0,n}};function nn(n,t){Un+=n,xn+=t,++cn}function vt(){W.point=Pi}function Pi(n,t){W.point=mi,nn(K=n,Q=t)}function mi(n,t){var e=n-K,i=t-Q,r=tn(e*e+i*i);An+=r*(K+n)/2,Tn+=r*(Q+t)/2,on+=r,nn(K=n,Q=t)}function dt(){W.point=nn}function $i(){W.point=Li}function Ni(){Ft(Ct,Dt)}function Li(n,t){W.point=Ft,nn(Ct=K=n,Dt=Q=t)}function Ft(n,t){var e=n-K,i=t-Q,r=tn(e*e+i*i);An+=r*(K+n)/2,Tn+=r*(Q+t)/2,on+=r,r=Q*n-K*t,jn+=r*(K+n),kn+=r*(Q+t),sn+=r*3,nn(K=n,Q=t)}function qt(n){this._context=n}qt.prototype={_radius:4.5,pointRadius:function(n){return this._radius=n,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(n,t){switch(this._point){case 0:{this._context.moveTo(n,t),this._point=1;break}case 1:{this._context.lineTo(n,t);break}default:{this._context.moveTo(n+this._radius,t),this._context.arc(n,t,this._radius,0,B);break}}},result:J};var bn=new b,Zn,Gt,Ot,pn,hn,Sn={point:J,lineStart:function(){Sn.point=Ii},lineEnd:function(){Zn&&Zt(Gt,Ot),Sn.point=J},polygonStart:function(){Zn=!0},polygonEnd:function(){Zn=null},result:function(){var n=+bn;return bn=new b,n}};function Ii(n,t){Sn.point=Zt,Gt=pn=n,Ot=hn=t}function Zt(n,t){pn-=n,hn-=t,bn.add(tn(pn*pn+hn*hn)),pn=n,hn=t}let St,zn,Et,_t;class wt{constructor(t){this._append=t==null?Ht:Ai(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,e){switch(this._point){case 0:{this._append`M${t},${e}`,this._point=1;break}case 1:{this._append`L${t},${e}`;break}default:{if(this._append`M${t},${e}`,this._radius!==Et||this._append!==zn){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,Et=i,zn=this._append,_t=this._,this._=r}this._+=_t;break}}}result(){const t=this._;return this._="",t.length?t:null}}function Ht(n){let t=1;this._+=n[0];for(const e=n.length;t<e;++t)this._+=arguments[t]+n[t]}function Ai(n){const t=Math.floor(n);if(!(t>=0))throw new RangeError(`invalid digits: ${n}`);if(t>15)return Ht;if(t!==St){const e=10**t;St=t,zn=function(r){let l=1;this._+=r[0];for(const a=r.length;l<a;++l)this._+=Math.round(arguments[l]*e)/e+r[l]}}return zn}function Ti(n,t){let e=3,i=4.5,r,l;function a(f){return f&&(typeof i=="function"&&l.pointRadius(+i.apply(this,arguments)),rn(f,r(l))),l.result()}return a.area=function(f){return rn(f,r(j)),j.result()},a.measure=function(f){return rn(f,r(Sn)),Sn.result()},a.bounds=function(f){return rn(f,r(In)),In.result()},a.centroid=function(f){return rn(f,r(W)),W.result()},a.projection=function(f){return arguments.length?(r=f==null?(n=null,Wn):(n=f).stream,a):n},a.context=function(f){return arguments.length?(l=f==null?(t=null,new wt(e)):new qt(t=f),typeof i!="function"&&l.pointRadius(i),a):t},a.pointRadius=function(f){return arguments.length?(i=typeof f=="function"?f:(l.pointRadius(+f),+f),a):i},a.digits=function(f){if(!arguments.length)return e;if(f==null)e=null;else{const v=Math.floor(f);if(!(v>=0))throw new RangeError(`invalid digits: ${f}`);e=v}return t===null&&(l=new wt(e)),a},a.projection(n).digits(e).context(t)}function tt(n){return function(t){var e=new nt;for(var i in n)e[i]=n[i];return e.stream=t,e}}function nt(){}nt.prototype={constructor:nt,point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function it(n,t,e){var i=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),i!=null&&n.clipExtent(null),rn(e,n.stream(In)),t(In.result()),i!=null&&n.clipExtent(i),n}function Xt(n,t,e){return it(n,function(i){var r=t[1][0]-t[0][0],l=t[1][1]-t[0][1],a=Math.min(r/(i[1][0]-i[0][0]),l/(i[1][1]-i[0][1])),f=+t[0][0]+(r-a*(i[1][0]+i[0][0]))/2,v=+t[0][1]+(l-a*(i[1][1]+i[0][1]))/2;n.scale(150*a).translate([f,v])},e)}function zi(n,t,e){return Xt(n,[[0,0],t],e)}function Ci(n,t,e){return it(n,function(i){var r=+t,l=r/(i[1][0]-i[0][0]),a=(r-l*(i[1][0]+i[0][0]))/2,f=-l*i[0][1];n.scale(150*l).translate([a,f])},e)}function Di(n,t,e){return it(n,function(i){var r=+t,l=r/(i[1][1]-i[0][1]),a=-l*i[0][0],f=(r-l*(i[1][1]+i[0][1]))/2;n.scale(150*l).translate([a,f])},e)}var yt=16,Fi=F(30*G);function Mt(n,t){return+t?Gi(n,t):qi(n)}function qi(n){return tt({point:function(t,e){t=n(t,e),this.stream.point(t[0],t[1])}})}function Gi(n,t){function e(i,r,l,a,f,v,g,o,u,c,p,h,w,d){var P=g-i,E=o-r,y=P*P+E*E;if(y>4*t&&w--){var S=a+c,M=f+p,R=v+h,I=tn(S*S+M*M+R*R),N=vn(R/=I),L=C(C(R)-1)<T||C(l-u)<T?(l+u)/2:gn(M,S),z=n(L,N),_=z[0],Z=z[1],D=_-i,A=Z-r,s=E*D-P*A;(s*s/y>t||C((P*D+E*A)/y-.5)>.3||a*c+f*p+v*h<Fi)&&(e(i,r,l,a,f,v,_,Z,L,S/=I,M/=I,R,w,d),d.point(_,Z),e(_,Z,L,S,M,R,g,o,u,c,p,h,w,d))}}return function(i){var r,l,a,f,v,g,o,u,c,p,h,w,d={point:P,lineStart:E,lineEnd:S,polygonStart:function(){i.polygonStart(),d.lineStart=M},polygonEnd:function(){i.polygonEnd(),d.lineStart=E}};function P(N,L){N=n(N,L),i.point(N[0],N[1])}function E(){u=NaN,d.point=y,i.lineStart()}function y(N,L){var z=un([N,L]),_=n(N,L);e(u,c,o,p,h,w,u=_[0],c=_[1],o=N,p=z[0],h=z[1],w=z[2],yt,i),i.point(u,c)}function S(){d.point=P,i.lineEnd()}function M(){E(),d.point=R,d.lineEnd=I}function R(N,L){y(r=N,L),l=u,a=c,f=p,v=h,g=w,d.point=y}function I(){e(u,c,o,p,h,w,l,a,r,f,v,g,yt,i),d.lineEnd=S,S()}return d}}var Oi=tt({point:function(n,t){this.stream.point(n*G,t*G)}});function Zi(n){return tt({point:function(t,e){var i=n(t,e);return this.stream.point(i[0],i[1])}})}function Hi(n,t,e,i,r){function l(a,f){return a*=i,f*=r,[t+n*a,e-n*f]}return l.invert=function(a,f){return[(a-t)/n*i,(e-f)/n*r]},l}function Rt(n,t,e,i,r,l){if(!l)return Hi(n,t,e,i,r);var a=F(l),f=q(l),v=a*n,g=f*n,o=a/n,u=f/n,c=(f*e-a*t)/n,p=(f*t+a*e)/n;function h(w,d){return w*=i,d*=r,[v*w-g*d+t,e-g*w-v*d]}return h.invert=function(w,d){return[i*(o*w-u*d+c),r*(p-u*w-o*d)]},h}function Xi(n){return Yi(function(){return n})()}function Yi(n){var t,e=150,i=480,r=250,l=0,a=0,f=0,v=0,g=0,o,u=0,c=1,p=1,h=null,w=gt,d=null,P,E,y,S=Wn,M=.5,R,I,N,L,z;function _(s){return N(s[0]*G,s[1]*G)}function Z(s){return s=N.invert(s[0],s[1]),s&&[s[0]*Y,s[1]*Y]}_.stream=function(s){return L&&z===s?L:L=Oi(Zi(o)(w(R(S(z=s)))))},_.preclip=function(s){return arguments.length?(w=s,h=void 0,A()):w},_.postclip=function(s){return arguments.length?(S=s,d=P=E=y=null,A()):S},_.clipAngle=function(s){return arguments.length?(w=+s?Si(h=s*G):(h=null,gt),A()):h*Y},_.clipExtent=function(s){return arguments.length?(S=s==null?(d=P=E=y=null,Wn):_i(d=+s[0][0],P=+s[0][1],E=+s[1][0],y=+s[1][1]),A()):d==null?null:[[d,P],[E,y]]},_.scale=function(s){return arguments.length?(e=+s,D()):e},_.translate=function(s){return arguments.length?(i=+s[0],r=+s[1],D()):[i,r]},_.center=function(s){return arguments.length?(l=s[0]%360*G,a=s[1]%360*G,D()):[l*Y,a*Y]},_.rotate=function(s){return arguments.length?(f=s[0]%360*G,v=s[1]%360*G,g=s.length>2?s[2]%360*G:0,D()):[f*Y,v*Y,g*Y]},_.angle=function(s){return arguments.length?(u=s%360*G,D()):u*Y},_.reflectX=function(s){return arguments.length?(c=s?-1:1,D()):c<0},_.reflectY=function(s){return arguments.length?(p=s?-1:1,D()):p<0},_.precision=function(s){return arguments.length?(R=Mt(I,M=s*s),A()):tn(M)},_.fitExtent=function(s,m){return Xt(_,s,m)},_.fitSize=function(s,m){return zi(_,s,m)},_.fitWidth=function(s,m){return Ci(_,s,m)},_.fitHeight=function(s,m){return Di(_,s,m)};function D(){var s=Rt(e,0,0,c,p,u).apply(null,t(l,a)),m=Rt(e,i-s[0],r-s[1],c,p,u);return o=$t(f,v,g),I=Bn(t,m),N=Bn(o,I),R=Mt(I,M),A()}function A(){return L=z=null,_}return function(){return t=n.apply(this,arguments),_.invert=t.invert&&Z,D()}}function et(n,t){return[n,oi(li((X+t)/2))]}et.invert=function(n,t){return[n,2*mt(ri(t))-X]};function Bi(){return Vi(et).scale(961/B)}function Vi(n){var t=Xi(n),e=t.center,i=t.scale,r=t.translate,l=t.clipExtent,a=null,f,v,g;t.scale=function(u){return arguments.length?(i(u),o()):i()},t.translate=function(u){return arguments.length?(r(u),o()):r()},t.center=function(u){return arguments.length?(e(u),o()):e()},t.clipExtent=function(u){return arguments.length?(u==null?a=f=v=g=null:(a=+u[0][0],f=+u[0][1],v=+u[1][0],g=+u[1][1]),o()):a==null?null:[[a,f],[v,g]]};function o(){var u=$*i(),c=t(ai(t.rotate()).invert([0,0]));return l(a==null?[[c[0]-u,c[1]-u],[c[0]+u,c[1]+u]]:n===et?[[Math.max(c[0]-u,a),f],[Math.min(c[0]+u,v),g]]:[[a,Math.max(c[1]-u,f)],[v,Math.min(c[1]+u,g)]])}return o()}function Wi(n){let t,e="Titre",i,r;return{c(){t=Bt("h1"),t.textContent=e,i=Vt(),r=Wt("svg"),this.h()},l(l){t=Jt(l,"H1",{"data-svelte-h":!0}),Kt(t)!=="svelte-1lyjp02"&&(t.textContent=e),i=Qt(l),r=Ut(l,"svg",{id:!0,width:!0,height:!0}),xt(r).forEach(_n),this.h()},h(){Cn(r,"id","carto_spectateur"),Cn(r,"width","440"),Cn(r,"height","300")},m(l,a){Dn(l,t,a),Dn(l,i,a),Dn(l,r,a)},p:Fn,i:Fn,o:Fn,d(l){l&&(_n(t),_n(i),_n(r))}}}function Ji(n){let t;return jt(()=>{if(rt("#carto_spectateur").empty())console.error("L'élément SVG n'existe pas dans le DOM");else{t=rt("#carto_spectateur"),+t.attr("width"),+t.attr("height");const e=Bi().center([2,47]).scale(100);ii("habillage_adminsitratif_fr_4326.geojson").then(i=>{t.append("g").selectAll("path").data(i.features).enter().append("path").attr("fill","grey").attr("d",Ti().projection(e)).style("stroke","none"),console.log("SVG",t)})}}),[]}class xi extends kt{constructor(t){super(),bt(this,t,Ji,Wi,Yt,{})}}export{xi as component};
